let pokemonRepository=(function(){let pokemonList=[];let apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=150';let modalContainer=document.querySelector('#modal-container');function add(pokemon){if(typeof pokemon==='object'&&'name' in pokemon){pokemonList.push(pokemon)}else{console.log('pokemon is not correct')}}
function getAll(){return pokemonList}
function findPokemon(searchName){$('.pokemon-list').empty();pokemonList.forEach(pokemon=>{if(pokemon.name.toLowerCase().includes(searchName.toLowerCase())){addListItem(pokemon)}})}
function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){let url=item.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){item.imageUrl=details.sprites.front_default;item.height=details.height;item.weight=details.weight;item.types=details.types}).catch(function(e){hideLoadingMessage();console.error(e)})}
function addListItem(pokemon){let listGroupElement=document.querySelector('.pokemon-list');let listItemButton=document.createElement('button');listItemButton.innerText=pokemon.name;listItemButton.classList.add('list-group-item','list-group-item-action','text-center','text-uppercase');listItemButton.setAttribute('data-toggle','modal');listItemButton.setAttribute('data-target','#modal-container');listGroupElement.appendChild(listItemButton);buttonEventListener(listItemButton,pokemon)}
function buttonEventListener(button,pokemon){button.addEventListener('click',function(){showDetails(pokemon)})}
function showDetails(pokemon){loadDetails(pokemon).then(function(){showModal(pokemon)})}
function showModal(pokemon){let modalBody=$('.modal-body');let modalTitle=$('.modal-title');let modalHeader=$('.modal-header');modalTitle.empty();modalBody.empty();let modal=document.createElement('div');modal.classList.add('modal');let pokemonName=$('<h1>'+pokemon.name+'</h1>');let imageElement=document.createElement('img');imageElement.classList.add('modal-img');imageElement.src=pokemon.imageUrl;let pokemonHeight=$('<p>'+'Height: '+pokemon.height+'</p>');let pokemonWeight=$('<p>'+'Weight: '+pokemon.weight+'</p>');let pokemonTypes=$('<p>'+'Type(s): '+pokemon.types[0].type.name+'<p>');modalTitle.append(pokemonName);modalBody.append(imageElement);modalBody.append(pokemonHeight);modalBody.append(pokemonWeight);modalBody.append(pokemonTypes)}
return{add:add,getAll:getAll,addListItem:addListItem,loadList:loadList,findPokemon:findPokemon}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})})
